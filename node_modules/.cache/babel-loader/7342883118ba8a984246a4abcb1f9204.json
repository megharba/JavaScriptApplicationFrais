{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Bruno Megharba\\\\OneDrive\\\\Documents\\\\GSBAPP\\\\GSBFront-main\\\\src\\\\components\\\\login\\\\Login.js\";\nimport React from 'react';\nimport './Login.css';\nimport logo from '../../asset/logo.png';\nimport * as fromUsersApi from '../../api/users';\nimport { withRouter } from \"react-router-dom\";\nimport Modal from \"react-bootstrap4-modal\";\nimport { postUsers } from '../../api/users';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: '',\n      password: '',\n      visible: false\n    };\n  }\n\n  handleChange(e) {\n    e.preventDefault();\n    let name = e.target.name;\n    this.setState({\n      [name]: e.target.value\n    });\n  }\n\n  ShowModal() {\n    this.setState({\n      visible: !this.state.visible\n    });\n  }\n\n  async login() {\n    try {\n      let {\n        decoded,\n        token\n      } = await postUsers({\n        login: this.state.login,\n        password: this.state.password\n      });\n\n      if (decoded) {\n        localStorage.setItem('token', token);\n        localStorage.setItem('id', decoded.id);\n        localStorage.setItem('nom', decoded.nom);\n        localStorage.setItem('prenom', decoded.prenom);\n        this.props.history.push('/accueil');\n      }\n    } catch (err) {\n      this.setState({\n        visible: !this.state.visible\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"maincontainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row no-gutter\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 d-none d-md-flex bg-image\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: logo,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 bg-light\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"login d-flex align-items-center py-5\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-lg-10 col-xl-7 mx-auto\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"display-4 fontsize\",\n                      children: \"Connexion Acc\\xE8s Visiteur\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 71,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"form-group mb-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        name: \"login\",\n                        type: \"email\",\n                        placeholder: \"Adresse mail\",\n                        required: \"\",\n                        autofocus: \"\",\n                        class: \"form-control rounded-pill border-0 shadow-sm px-4\",\n                        value: this.state.login,\n                        onChange: e => this.handleChange(e)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 75,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 74,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"form-group mb-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        name: \"password\",\n                        type: \"password\",\n                        placeholder: \"Mot de passe\",\n                        required: \"\",\n                        class: \"form-control rounded-pill border-0 shadow-sm px-4 text-primary\",\n                        value: this.state.password,\n                        onChange: e => this.handleChange(e)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 78,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 77,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"submit\",\n                        className: \"btn btn-primary btn-block text-uppercase mb-2 rounded-pill shadow-sm centrer\",\n                        onClick: () => this.login(),\n                        children: \"Se connecter\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 85,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 84,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        visible: this.state.visible,\n        dialogClassName: \"\",\n        role: \"alert\",\n        onClickBackdrop: () => this.ShowModal(),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body alert alert-danger\",\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"centrer\",\n            children: \"Votre mot de passe ou votre identifiant est incorrect.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Login);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["C:/Users/Bruno Megharba/OneDrive/Documents/GSBAPP/GSBFront-main/src/components/login/Login.js"],"names":["React","logo","fromUsersApi","withRouter","Modal","postUsers","Login","Component","constructor","props","state","login","password","visible","handleChange","e","preventDefault","name","target","setState","value","ShowModal","decoded","token","localStorage","setItem","id","nom","prenom","history","push","err","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './Login.css'\nimport logo from '../../asset/logo.png'\nimport * as fromUsersApi from '../../api/users'\nimport {withRouter } from \"react-router-dom\";\nimport Modal from \"react-bootstrap4-modal\";\nimport  {postUsers} from '../../api/users'\n\nclass Login extends React.Component {\n    constructor(props){\n        super(props)\n\n        this.state = {\n            login:'',\n            password:'',\n            visible: false\n        }\n    }\n\n    \n    handleChange(e){\n        e.preventDefault()\n        let name = e.target.name\n        this.setState({\n            [name]: e.target.value\n        })\n    }\n\n    ShowModal() {\n        this.setState({\n            visible: !this.state.visible\n        })\n    }\n\n    async login(){\n    try {\n        let {decoded, token } = await postUsers({login: this.state.login, password:this.state.password})\n        if(decoded){\n            localStorage.setItem('token', token)\n            localStorage.setItem('id', decoded.id)\n            localStorage.setItem('nom', decoded.nom)\n            localStorage.setItem('prenom', decoded.prenom)\n            this.props.history.push('/accueil')\n        } \n     } catch (err){\n            this.setState({\n                visible: !this.state.visible\n            })\n        }\n        \n    }\n\n\nrender (){\n    return(\n        <div className=\"maincontainer\">\n        <div className=\"container-fluid\">\n            <div className=\"row no-gutter\">\n               \n                <div className=\"col-md-6 d-none d-md-flex bg-image\">\n                    <img src={logo} alt=\"\"/>\n                </div>\n                \n                <div className=\"col-md-6 bg-light\">\n                    <div className=\"login d-flex align-items-center py-5\">\n                       \n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-lg-10 col-xl-7 mx-auto\">\n                                    \n                                    <h3 className=\"display-4 fontsize\">Connexion Accès Visiteur</h3>\n                                    \n                              \n                                        <div className=\"form-group mb-3\">\n                                            <input name=\"login\" type=\"email\" placeholder=\"Adresse mail\" required=\"\" autofocus=\"\" class=\"form-control rounded-pill border-0 shadow-sm px-4\" value= {this.state.login} onChange={(e) => this.handleChange(e)}/>\n                                        </div>\n                                        <div className=\"form-group mb-3\">\n                                            <input name=\"password\" type=\"password\" placeholder=\"Mot de passe\" required=\"\" class=\"form-control rounded-pill border-0 shadow-sm px-4 text-primary\" value= {this.state.password} onChange={(e) => this.handleChange(e)}/>\n                                        </div>\n                                        {/* <div className=\"custom-control custom-checkbox mb-3\">\n                                            <input id=\"customCheck1\" type=\"checkbox\" class=\"custom-control-input\" />\n                                            <label for=\"customCheck1\" className=\"custom-control-label\">Mémoriser le mot de passe</label>\n                                        </div> */}\n                                        <div className=\"text-center\">\n                                        <button type=\"submit\" className=\"btn btn-primary btn-block text-uppercase mb-2 rounded-pill shadow-sm centrer\" onClick={() => this.login()}>Se connecter</button>\n                                        </div>\n                                        \n                                        \n                                 \n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>                    \n                    <Modal visible={this.state.visible} dialogClassName=\"\" role=\"alert\" onClickBackdrop={() => this.ShowModal()}>\n\n                <div className=\"modal-body alert alert-danger\">\n                    \n                    <h6 className=\"centrer\">Votre mot de passe ou votre identifiant est incorrect.</h6>\n                   \n                  \n                </div>                  \n                  \n\n                    </Modal>\n\n      </div>\n    )\n}\n}\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}