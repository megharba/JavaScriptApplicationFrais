{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Bruno Megharba\\\\OneDrive\\\\Documents\\\\GSBAPP\\\\GSBFront-main\\\\src\\\\components\\\\billsList\\\\BillsList.js\";\nimport React from 'react';\nimport './BillsList.css';\nimport * as fromBillsApi from '../../api/bills';\nimport Modal from \"react-bootstrap4-modal\";\nimport moment from 'moment';\nimport * as fromUsersApi from '../../api/users';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BillsList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      idFraisForfait: ['KM', 'NUI', 'REP'],\n      visible: false,\n      quantite: '',\n      mois: '',\n      bills: [],\n      users: [],\n      fraishorsforfait: [],\n      kmQty: 0,\n      nightsQty: 0,\n      repasQty: 0,\n      profileImg: ''\n    };\n  }\n\n  handleChange(e) {\n    e.preventDefault();\n    let name = e.target.name;\n    this.setState({\n      [name]: e.target.value\n    });\n  }\n\n  handleRowsChange(e, i) {\n    e.preventDefault();\n    let {\n      name,\n      value\n    } = e.target;\n    let fraishorsforfait = [...this.state.fraishorsforfait];\n    fraishorsforfait[i] = { ...fraishorsforfait[i],\n      [name]: value\n    };\n    this.setState({\n      fraishorsforfait: fraishorsforfait\n    });\n  }\n\n  ShowModal() {\n    this.setState({\n      visible: !this.state.visible\n    });\n  }\n\n  async getLignes(mois) {\n    let id = localStorage.getItem('id');\n    let ligneff = await fromBillsApi.getLigneFraisForfait(id, mois);\n    let lignefhf = await fromBillsApi.getLigneFraisHorsForfait(id, mois);\n    lignefhf.result.map((ligne, i) => {\n      ligne.date = moment(ligne.date).format(\"YYYY-MM-DD\");\n    });\n    this.setState({\n      kmQty: ligneff.result[0].quantite,\n      nightsQty: ligneff.result[1].quantite,\n      repasQty: ligneff.result[2].quantite,\n      fraishorsforfait: lignefhf.result,\n      mois: mois\n    });\n  }\n\n  async update() {\n    let idUser = localStorage.getItem('id');\n    await fromBillsApi.putLigneFraisForfait(idUser, this.state.mois, this.state.idFraisForfait[0], this.state.kmQty);\n    await fromBillsApi.putLigneFraisForfait(idUser, this.state.mois, this.state.idFraisForfait[1], this.state.nightsQty);\n    await fromBillsApi.putLigneFraisForfait(idUser, this.state.mois, this.state.idFraisForfait[2], this.state.repasQty);\n    this.state.fraishorsforfait.map(async (f, i) => {\n      let horsforfait = await fromBillsApi.putLigneFraisHorsForfait(f.id, {\n        idutilisateur: idUser,\n        mois: this.state.mois,\n        libelle: f.libelle,\n        date: f.date,\n        montant: f.montant,\n        libelle: f.libelle\n      });\n    });\n    this.setState({\n      visible: !this.state.visible\n    });\n  }\n\n  addRows() {\n    this.setState({\n      fraishorsforfait: [...this.state.fraishorsforfait, {\n        date: '',\n        libelle: '',\n        montant: '',\n        justificatif: ''\n      }]\n    });\n  }\n\n  removeRows(i) {\n    let row = this.state.fraishorsforfait;\n    row.splice(i, 1);\n    this.setState({\n      fraishorsforfait: row\n    });\n  }\n\n  async componentDidMount() {\n    let id = localStorage.getItem('id');\n    let bills = await fromBillsApi.getBills(id);\n    this.setState({\n      bills: bills.result\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-shrink-0\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 20\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mt-5\",\n          children: \"Bonjour, voici vos fiches de frais : \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 26\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 90\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-hover\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Mois\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Justificatifs\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Montant\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Date de modification\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Etat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.bills.map((bill, i) => {\n              bill.dateModif = moment(bill.dateModif, 'YYYY-MM-DD[T]HH:mm:ss').format(\"YYYY-MM-DD\");\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"row\",\n                  children: bill.mois\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: bill.nbJustificatifs\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: bill.montantValide\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: bill.dateModif\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: bill.idEtat\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    class: \"btn btn-info btn-sm\",\n                    \"data-action\": \"update\",\n                    onClick: () => {\n                      this.ShowModal();\n                      this.getLignes(bill.mois);\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      class: \"fas fa-edit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 41\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          visible: this.state.visible,\n          dialogClassName: \"modal-80w font-size center modal-fond modal-dialog-scrollable\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"modal-title\",\n              children: [\"Modification Fiche Frais de \", this.state.mois, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-danger\",\n              onClick: () => this.ShowModal(),\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fas fa-times\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"centrer\",\n              children: \"Frais Forfait \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card border-primary\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"table text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \"Frais \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 180,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \"Quantit\\xE9\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 181,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \"Montant unitaire\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 182,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \"Total\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"form-control-label\",\n                          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                            children: \"Nuit\\xE9es\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 188,\n                            columnNumber: 91\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 188,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 188,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          name: \"nightsQty\",\n                          placeholder: \"Qt\\xE9\",\n                          value: this.state.nightsQty,\n                          onChange: e => this.handleChange(e)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 189,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 189,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: \"80\\u20AC\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 190,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: [this.state.nightsQty * 80, \"\\u20AC\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 191,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"label\", {\n                          for: \"\",\n                          className: \"form-control-label\",\n                          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                            children: \"Repas\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 194,\n                            columnNumber: 98\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 194,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 194,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          name: \"repasQty\",\n                          placeholder: \"Qt\\xE9\",\n                          value: this.state.repasQty,\n                          onChange: e => this.handleChange(e)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 195,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 195,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: \"29\\u20AC\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 196,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.state.repasQty * 29\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 197,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"label\", {\n                          for: \"\",\n                          className: \"form-control-label\",\n                          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                            children: \"Kilom\\xE9trage\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 200,\n                            columnNumber: 98\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 200,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 200,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          name: \"kmQty\",\n                          placeholder: \"Qt\\xE9\",\n                          value: this.state.kmQty,\n                          onChange: e => this.handleChange(e)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 201,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 201,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: \"0.6\\u20AC\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 202,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.state.kmQty * 0.6\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 203,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 199,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"centrer\",\n              children: \"Frais Hors Forfait \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card border-primary\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-success btn-sm\",\n                  onClick: () => this.addRows(),\n                  children: \"Ajoutez un frais hors forfait\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"table text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \"Dates\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 219,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \"Libell\\xE9\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 220,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \"Montant\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 221,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \" Justificatifs\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 222,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \" Actions\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 223,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 218,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: this.state.fraishorsforfait.map((f, i) => {\n                      return /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"date\",\n                            name: \"date\",\n                            value: this.state.fraishorsforfait[i].date,\n                            onChange: e => this.handleRowsChange(e, i)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 234,\n                            columnNumber: 65\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 234,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"text\",\n                            placeholder: \"Libell\\xE9\",\n                            name: \"libelle\",\n                            value: this.state.fraishorsforfait[i].libelle,\n                            onChange: e => this.handleRowsChange(e, i)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 235,\n                            columnNumber: 65\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 235,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"text   \",\n                            placeholder: \"Montant\",\n                            name: \"montant\",\n                            value: this.state.fraishorsforfait[i].montant,\n                            onChange: e => this.handleRowsChange(e, i)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 236,\n                            columnNumber: 65\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 236,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"file\",\n                            name: \"justificatif\",\n                            value: this.state.fraishorsforfait[i].justificatif,\n                            onChange: e => this.handleRowsChange(e, i)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 237,\n                            columnNumber: 65\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 237,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: /*#__PURE__*/_jsxDEV(\"button\", {\n                            type: \"button\",\n                            className: \"btn btn-danger btn-sm mr-2\",\n                            \"data-action\": \"delete\",\n                            onClick: () => this.removeRows(i),\n                            children: /*#__PURE__*/_jsxDEV(\"i\", {\n                              className: \"fas fa-trash\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 240,\n                              columnNumber: 69\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 239,\n                            columnNumber: 65\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 238,\n                          columnNumber: 61\n                        }, this)]\n                      }, i, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 233,\n                        columnNumber: 57\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-success\",\n              onClick: () => this.update(),\n              children: \"Enregistrer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-light\",\n              onClick: () => this.ShowModal(),\n              children: \"Annuler\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default BillsList;","map":{"version":3,"sources":["C:/Users/Bruno Megharba/OneDrive/Documents/GSBAPP/GSBFront-main/src/components/billsList/BillsList.js"],"names":["React","fromBillsApi","Modal","moment","fromUsersApi","BillsList","Component","constructor","props","state","idFraisForfait","visible","quantite","mois","bills","users","fraishorsforfait","kmQty","nightsQty","repasQty","profileImg","handleChange","e","preventDefault","name","target","setState","value","handleRowsChange","i","ShowModal","getLignes","id","localStorage","getItem","ligneff","getLigneFraisForfait","lignefhf","getLigneFraisHorsForfait","result","map","ligne","date","format","update","idUser","putLigneFraisForfait","f","horsforfait","putLigneFraisHorsForfait","idutilisateur","libelle","montant","addRows","justificatif","removeRows","row","splice","componentDidMount","getBills","render","bill","dateModif","nbJustificatifs","montantValide","idEtat"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './BillsList.css';\nimport * as fromBillsApi from '../../api/bills'\nimport Modal from \"react-bootstrap4-modal\";\nimport moment from 'moment'\nimport  * as fromUsersApi from '../../api/users'\n\n\nclass BillsList extends React.Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = ({\n            idFraisForfait: ['KM' , 'NUI', 'REP'],\n            visible: false,\n            quantite:'',\n            mois:'',\n            bills: [],\n            users:[],\n            fraishorsforfait: [],\n            kmQty:0,\n            nightsQty:0,\n            repasQty:0,\n            profileImg:''\n        })\n\n    }\n\n    handleChange(e){\n        e.preventDefault()\n        let name = e.target.name\n        this.setState({\n            [name]: e.target.value\n        })\n    }\n\n    handleRowsChange(e, i){\n        e.preventDefault()\n        let {name, value } = e.target\n        let fraishorsforfait = [...this.state.fraishorsforfait]\n        fraishorsforfait[i] = {\n            ...fraishorsforfait[i],\n            [name] : value\n        }\n        this.setState({\n            fraishorsforfait : fraishorsforfait    \n        })\n    }\n\n    ShowModal() {\n        \n        this.setState({\n            visible: !this.state.visible\n        })\n    }\n\n    async getLignes(mois) {\n \n        let id = localStorage.getItem('id')\n        let ligneff = await fromBillsApi.getLigneFraisForfait(id, mois)\n        let lignefhf = await fromBillsApi.getLigneFraisHorsForfait(id,mois)\n        lignefhf.result.map((ligne,i) => {\n\n            ligne.date = moment(ligne.date).format(\"YYYY-MM-DD\")\n        })\n        \n        this.setState({\n            kmQty: ligneff.result[0].quantite,\n            nightsQty: ligneff.result[1].quantite,\n            repasQty: ligneff.result[2].quantite,\n            fraishorsforfait: lignefhf.result,\n            mois: mois\n\n        })\n\n    }\n\n    async update() {\n        let idUser = localStorage.getItem('id')\n        \n        await fromBillsApi.putLigneFraisForfait(idUser, this.state.mois, this.state.idFraisForfait[0],this.state.kmQty)\n        await fromBillsApi.putLigneFraisForfait(idUser, this.state.mois, this.state.idFraisForfait[1],this.state.nightsQty)\n        await fromBillsApi.putLigneFraisForfait(idUser, this.state.mois, this.state.idFraisForfait[2],this.state.repasQty)\n        \n        this.state.fraishorsforfait.map(async (f,i) => {\n            let horsforfait = await fromBillsApi.putLigneFraisHorsForfait(f.id, {idutilisateur : idUser, mois: this.state.mois, libelle : f.libelle, date : f.date, montant : f.montant, libelle: f.libelle})\n        })\n\n        \n        this.setState({\n            visible : !this.state.visible\n        })\n    }\n\n    addRows() {\n        \n        this.setState({\n            fraishorsforfait: [...this.state.fraishorsforfait, {date: '' , libelle: '', montant: '', justificatif: ''}]\n        })\n    }\n    removeRows(i){\n        let row = this.state.fraishorsforfait\n        row.splice(i,1)\n        this.setState({\n            fraishorsforfait:row\n        })\n    }\n\n    async componentDidMount() {\n        let id = localStorage.getItem('id')\n        let bills = await fromBillsApi.getBills(id)\n        this.setState({ \n            bills: bills.result,\n            \n        })\n\n        \n    }\n\n\n    render() {\n\n        return (\n\n            <main className=\"flex-shrink-0\">\n                <div className=\"container\">\n                   <br/> <h3 className=\"mt-5\">Bonjour, voici vos fiches de frais : </h3> <br/>\n                    <table className=\"table table-hover\">\n                        <thead>\n                            <tr>\n                                <th scope=\"col\">Mois</th>\n                                <th scope=\"col\">Justificatifs</th>\n                                <th scope=\"col\">Montant</th>\n                                <th scope=\"col\">Date de modification</th>\n                                <th scope=\"col\">Etat</th>\n                                <th scope=\"col\">Action</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {\n                                this.state.bills.map((bill, i) => {\n                                \n                                    bill.dateModif = moment(bill.dateModif,'YYYY-MM-DD[T]HH:mm:ss').format(\"YYYY-MM-DD\")\n                                    return (\n                                        <tr>\n                                            <th scope=\"row\">{bill.mois}</th>\n                                            <td>{bill.nbJustificatifs}</td>\n                                            <td>{bill.montantValide}</td>\n                                            <td>{bill.dateModif}</td>\n                                            <td>{bill.idEtat}</td>\n                                            <td>\n                                                <button type=\"button\" class=\"btn btn-info btn-sm\" data-action=\"update\" onClick={() => {this.ShowModal(); this.getLignes(bill.mois)}}>\n                                                    <i class=\"fas fa-edit\"></i>\n                                                </button>\n                                            </td>\n                                        </tr>\n                                    )\n                                    \n                                })\n                            }\n                        </tbody>\n                    </table>\n                    <Modal visible={this.state.visible} dialogClassName=\"modal-80w font-size center modal-fond modal-dialog-scrollable\">\n                            \n                        <div className=\"modal-header\">\n                            <h4 className=\"modal-title\">Modification Fiche Frais de {this.state.mois} </h4>\n                            <button type=\"button\" className=\"btn btn-danger\" onClick={() => this.ShowModal()}>\n                                <i class=\"fas fa-times\"></i>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                        \n                            <h5 className=\"centrer\">Frais Forfait </h5>\n                            <div className=\"card border-primary\">\n                                <div className=\"card-body\">\n                                    <table className=\"table text-center\">\n                                        <thead>\n                                            <tr>\n                                                <th scope=\"col\">Frais </th>\n                                                <th scope=\"col\">Quantité</th>\n                                                <th scope=\"col\">Montant unitaire</th>\n                                                <th scope=\"col\">Total</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <tr>\n                                                <td><label className=\"form-control-label\"><strong>Nuitées</strong></label></td>\n                                                <td><input type=\"text\" name=\"nightsQty\" placeholder=\"Qté\" value={this.state.nightsQty} onChange={(e) => this.handleChange(e)} /></td>\n                                                <td>80€</td>\n                                                <td>{this.state.nightsQty * 80}€</td>\n                                            </tr>\n                                            <tr>\n                                                <td><label for=\"\" className=\"form-control-label\"><strong>Repas</strong></label></td>\n                                                <td><input type=\"text\" name=\"repasQty\" placeholder=\"Qté\" value={this.state.repasQty} onChange={(e) => this.handleChange(e)} /></td>\n                                                <td>29€</td>\n                                                <td>{this.state.repasQty * 29}</td>\n                                            </tr>\n                                            <tr>\n                                                <td><label for=\"\" className=\"form-control-label\"><strong>Kilométrage</strong></label></td>\n                                                <td><input type=\"text\" name=\"kmQty\" placeholder=\"Qté\" value={this.state.kmQty} onChange={(e) => this.handleChange(e)} /></td>\n                                                <td>0.6€</td>\n                                                <td>{this.state.kmQty * 0.6}</td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n\n                            <br />\n                            <h5 className=\"centrer\">Frais Hors Forfait </h5>\n                            <div className=\"card border-primary\">\n                                <div className=\"card-body\">\n                                <button type=\"button\" className=\"btn btn-success btn-sm\" onClick={() => this.addRows()}>Ajoutez un frais hors forfait</button>\n                                    <table className=\"table text-center\">\n                                        <thead>                                \n                                        \n                                            <tr> \n                                                <th scope=\"col\">Dates</th>\n                                                <th scope=\"col\">Libellé</th>\n                                                <th scope=\"col\">Montant</th>\n                                                <th scope=\"col\"> Justificatifs</th>\n                                                <th scope=\"col\"> Actions</th>\n                                            </tr>\n                                        </thead>\n                                        \n                                        <tbody>\n                                        \n                                            {\n                                                \n                                                this.state.fraishorsforfait.map((f, i) => {\n                                                    return (\n                                                        <tr key={i}>\n                                                            <td><input type=\"date\" name=\"date\" value={this.state.fraishorsforfait[i].date} onChange={(e) => this.handleRowsChange(e,i)}/></td>\n                                                            <td><input type=\"text\" placeholder=\"Libellé\" name=\"libelle\" value={this.state.fraishorsforfait[i].libelle} onChange={(e) => this.handleRowsChange(e,i)}/></td>\n                                                            <td><input type=\"text   \" placeholder=\"Montant\" name=\"montant\" value={this.state.fraishorsforfait[i].montant} onChange={(e) => this.handleRowsChange(e,i)}/></td>\n                                                            <td><input type=\"file\" name=\"justificatif\" value={this.state.fraishorsforfait[i].justificatif} onChange={(e) => this.handleRowsChange(e,i)}/></td>\n                                                            <td>\n                                                                <button type=\"button\" className=\"btn btn-danger btn-sm mr-2\" data-action=\"delete\" onClick={() => this.removeRows(i)}>\n                                                                    <i className=\"fas fa-trash\"></i>\n                                                                </button>\n                                                            </td>\n                                                        </tr>\n                                                    )\n                                                })\n                                                \n                                            }\n                                            \n                                            \n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"button\" className=\"btn btn-success\" onClick={() => this.update()}>\n                                Enregistrer\n                            </button>\n                            <button type=\"button\" className=\"btn btn-light\" onClick={() => this.ShowModal()}>\n                                Annuler\n                            </button>\n                        </div>\n                    \n                    </Modal>\n                </div>\n\n            </main>\n\n        )\n\n    }\n\n\n}\n\nexport default BillsList;\n"]},"metadata":{},"sourceType":"module"}