{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Bruno Megharba/OneDrive/Documents/GSBAPP/GSBFront-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Bruno Megharba/OneDrive/Documents/GSBAPP/GSBFront-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/Bruno Megharba/OneDrive/Documents/GSBAPP/GSBFront-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/Bruno Megharba/OneDrive/Documents/GSBAPP/GSBFront-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Bruno Megharba/OneDrive/Documents/GSBAPP/GSBFront-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Bruno Megharba/OneDrive/Documents/GSBAPP/GSBFront-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Bruno Megharba/OneDrive/Documents/GSBAPP/GSBFront-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Login.css';import logo from'../../asset/logo.png';import*as fromUsersApi from'../../api/users';import{withRouter}from\"react-router-dom\";import Modal from\"react-bootstrap4-modal\";import{postUsers}from'../../api/users';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={login:'',password:'',visible:false};return _this;}_createClass(Login,[{key:\"handleChange\",value:function handleChange(e){e.preventDefault();var name=e.target.name;this.setState(_defineProperty({},name,e.target.value));}},{key:\"ShowModal\",value:function ShowModal(){this.setState({visible:!this.state.visible});}},{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$postUsers,decoded,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return postUsers({login:this.state.login,password:this.state.password});case 3:_yield$postUsers=_context.sent;decoded=_yield$postUsers.decoded;token=_yield$postUsers.token;if(decoded){localStorage.setItem('token',token);localStorage.setItem('id',decoded.id);localStorage.setItem('nom',decoded.nom);localStorage.setItem('prenom',decoded.prenom);this.props.history.push('/accueil');}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);this.setState({visible:!this.state.visible});case 12:case\"end\":return _context.stop();}}},_callee,this,[[0,9]]);}));function login(){return _login.apply(this,arguments);}return login;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"maincontainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row no-gutter\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 d-none d-md-flex bg-image\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 bg-light\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login d-flex align-items-center py-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-10 col-xl-7 mx-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"display-4 fontsize\",children:\"Connexion Acc\\xE8s Visiteur\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group mb-3\",children:/*#__PURE__*/_jsx(\"input\",{name:\"login\",type:\"email\",placeholder:\"Adresse mail\",required:\"\",autofocus:\"\",class:\"form-control rounded-pill border-0 shadow-sm px-4\",value:this.state.login,onChange:function onChange(e){return _this2.handleChange(e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group mb-3\",children:/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\"Mot de passe\",required:\"\",class:\"form-control rounded-pill border-0 shadow-sm px-4 text-primary\",value:this.state.password,onChange:function onChange(e){return _this2.handleChange(e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block text-uppercase mb-2 rounded-pill shadow-sm centrer\",onClick:function onClick(){return _this2.login();},children:\"Se connecter\"})})]})})})})})]})}),/*#__PURE__*/_jsx(Modal,{visible:this.state.visible,dialogClassName:\"\",role:\"alert\",onClickBackdrop:function onClickBackdrop(){return _this2.ShowModal();},children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-body alert alert-danger\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"centrer\",children:\"Votre mot de passe ou votre identifiant est incorrect.\"})})})]});}}]);return Login;}(React.Component);export default withRouter(Login);","map":{"version":3,"sources":["C:/Users/Bruno Megharba/OneDrive/Documents/GSBAPP/GSBFront-main/src/components/login/Login.js"],"names":["React","logo","fromUsersApi","withRouter","Modal","postUsers","Login","props","state","login","password","visible","e","preventDefault","name","target","setState","value","decoded","token","localStorage","setItem","id","nom","prenom","history","push","handleChange","ShowModal","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './Login.css'\nimport logo from '../../asset/logo.png'\nimport * as fromUsersApi from '../../api/users'\nimport {withRouter } from \"react-router-dom\";\nimport Modal from \"react-bootstrap4-modal\";\nimport  {postUsers} from '../../api/users'\n\nclass Login extends React.Component {\n    constructor(props){\n        super(props)\n\n        this.state = {\n            login:'',\n            password:'',\n            visible: false\n        }\n    }\n\n    \n    handleChange(e){\n        e.preventDefault()\n        let name = e.target.name\n        this.setState({\n            [name]: e.target.value\n        })\n    }\n\n    ShowModal() {\n        this.setState({\n            visible: !this.state.visible\n        })\n    }\n\n    async login(){\n    try {\n        let {decoded, token } = await postUsers({login: this.state.login, password:this.state.password})\n        if(decoded){\n            localStorage.setItem('token', token)\n            localStorage.setItem('id', decoded.id)\n            localStorage.setItem('nom', decoded.nom)\n            localStorage.setItem('prenom', decoded.prenom)\n            this.props.history.push('/accueil')\n        } \n     } catch (err){\n            this.setState({\n                visible: !this.state.visible\n            })\n        }\n        \n    }\n\n\nrender (){\n    return(\n        <div className=\"maincontainer\">\n        <div className=\"container-fluid\">\n            <div className=\"row no-gutter\">\n               \n                <div className=\"col-md-6 d-none d-md-flex bg-image\">\n                    <img src={logo} alt=\"\"/>\n                </div>\n                \n                <div className=\"col-md-6 bg-light\">\n                    <div className=\"login d-flex align-items-center py-5\">\n                       \n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-lg-10 col-xl-7 mx-auto\">\n                                    \n                                    <h3 className=\"display-4 fontsize\">Connexion Accès Visiteur</h3>\n                                    \n                              \n                                        <div className=\"form-group mb-3\">\n                                            <input name=\"login\" type=\"email\" placeholder=\"Adresse mail\" required=\"\" autofocus=\"\" class=\"form-control rounded-pill border-0 shadow-sm px-4\" value= {this.state.login} onChange={(e) => this.handleChange(e)}/>\n                                        </div>\n                                        <div className=\"form-group mb-3\">\n                                            <input name=\"password\" type=\"password\" placeholder=\"Mot de passe\" required=\"\" class=\"form-control rounded-pill border-0 shadow-sm px-4 text-primary\" value= {this.state.password} onChange={(e) => this.handleChange(e)}/>\n                                        </div>\n                                        {/* <div className=\"custom-control custom-checkbox mb-3\">\n                                            <input id=\"customCheck1\" type=\"checkbox\" class=\"custom-control-input\" />\n                                            <label for=\"customCheck1\" className=\"custom-control-label\">Mémoriser le mot de passe</label>\n                                        </div> */}\n                                        <div className=\"text-center\">\n                                        <button type=\"submit\" className=\"btn btn-primary btn-block text-uppercase mb-2 rounded-pill shadow-sm centrer\" onClick={() => this.login()}>Se connecter</button>\n                                        </div>\n                                        \n                                        \n                                 \n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>                    \n                    <Modal visible={this.state.visible} dialogClassName=\"\" role=\"alert\" onClickBackdrop={() => this.ShowModal()}>\n\n                <div className=\"modal-body alert alert-danger\">\n                    \n                    <h6 className=\"centrer\">Votre mot de passe ou votre identifiant est incorrect.</h6>\n                   \n                  \n                </div>                  \n                  \n\n                    </Modal>\n\n      </div>\n    )\n}\n}\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}